/**
 * @file layout.scss
 *
 * Defines the skeleton framework for our application's content
 *
 * @author Stanley Clark <s.clark@student.tue.nl>
 * @version 1.0.0
 */

@import "_general.scss";

// Set up a flex box display wrapper

#wrapper {
	display: flex;
	flex-flow: column;
	min-height: 100%;

	// Set up a css toggle switch to reveal an off canvas menu when on mobile devices

	#nav-toggle:checked {
		~ .nav-toggle--label {
			.nav-toggle--icon-close {
				display: block;
			}
			.nav-toggle--icon-menu {
				display: none;
			}
		}

		~ #main .tree-view--wrapper{
			left: 0;
		}
	}

	.nav-toggle--label {
		position: absolute;
		top: 1rem;
		right: 1rem;

		.nav-toggle--icon-close {
			display: none;
		}
		.nav-toggle--icon-menu {
			display: block;
		}

		@include breakpoint(md) {
			.nav-toggle--icon-close, .nav-toggle--icon-menu {
				display: none;
			}
		}
	}

	#header {
		flex: 0 1 auto;
		background: url(../images/header_background.jpg) top center / cover no-repeat fixed;

		@include breakpoint(md) {
			background-size: contain;
		}

		.hero--wrapper {
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 1rem;

			.hero--logo {
				flex: 1;
				width: 100px;
			}

			.hero--text {
				flex: 1;
				padding: 2rem 0 0;
				text-align: center;
			}

			.hero--headline {
				color: $text-primary;
			}

			.hero--motto {
				color: $text-secondary;
				font-size: $font-m;
			}
		}

		.tree-view--wrapper {
			display: none;
			flex-direction: column;
			background: rgba($primary-dark, 0.3);

			@include breakpoint(md) {
				display: flex;
			}

			// We start the hack to display a highlight on parent concepts.
			// We do not know the order in which the concepts will appear.
			// TODO: figure out if this is safe and change if needed.

			.tree-view--diagon-active + table tr:nth-of-type(2) td,
			.tree-view--fame-active + table tr:nth-of-type(3) td,
			.tree-view--hogwarts-active + table tr:nth-of-type(4) td,
			.tree-view--hall-active + table tr:nth-of-type(5) td,
			.tree-view--information-active + table tr:nth-of-type(6) td {
				@include nav-highlight();
			}

			table {
				margin: 0 0 0 15px;
				width: calc(100% - 15px);
				border-collapse: collapse;
			}

			tbody {
				border: 0;
				background: inherit;
			}

			tr {
				display: block;
				float: left;
				background: inherit;

				// Don't display the root hogwarts concept

				&:first-of-type {
					display: none;
				}
			}

			td {
				position: relative;
				padding: 0.5rem 15px;

				// Don't display sub level concepts

				&[style="padding-left: 30px;"]{
					display: none;
				}
			}

			a {
				padding: 0 1rem;
				color: $white;
			}

			b {
				font-weight: 400;
				@include nav-highlight();
			}
		}
	}

	#main {
		display: flex;
		flex: 1 1 auto;

		$tree-view--width: 200px;

		.tree-view--wrapper {
			position: fixed;
			top: 0;
			bottom: 0;
			left: -1 * $tree-view--width;
			width: $tree-view--width;
			background: $primary;
			z-index: $second-floor;
			transition: left 0.3s;
			@include material-shadow();

			@include breakpoint(md) {
				position: relative;
				left: auto;
				box-shadow: none;
			}

			tr, tbody {
				background: transparent;
			}

			tr:first-child {
				display: none;
			}

			// Don't display top level concepts on desktop devices

			td[style="padding-left: 15px;"] {
				@include breakpoint(md) {
					display: none;
				}
			}
		}

		.resource--wrapper {
			flex: 1;
			padding-bottom: 4rem;

			@include breakpoint(md) {
				margin-right: $tree-view--width;
				margin-left: 1rem;
			}
		}

		.button--next {
			position: fixed;
			width: 10rem;
			right: 1rem;
			bottom: 0;
			z-index: $first-floor;
		}
	}

	#footer {
		position: relative;
		flex: 0 1 25px;
		display: flex;
		justify-content: center;
		background: rgba($primary-dark, 0.3);

		.footer--to-top {
			position: absolute;
			top: -38px;
			height: 38px;
			padding: 0.5rem 2rem;
			background: inherit;
		}
	}

}